#!/bin/sh
# Package client.

cd `dirname $0`

platform=`./parse_platform`

if [ $? -ne 0 ]
then
  echo "Invalid platform."
  exit 1
fi

rev=`./version`
baseDir=/tmp/combined
packageName=aerospike-client-c-$rev.$platform.x86_64
packageDir=$baseDir/$packageName

# Build combined package with api docs and examples.
rm -f *.tgz
rm -rf $baseDir
mkdir -p $baseDir
mkdir -p $packageDir

./prepare_examples $packageDir

mkdir -p $packageDir/docs
cp -r ../aerospike/target/apidocs/html/* $packageDir/docs

./package_lib $packageDir
./package_devel $packageDir

tar cf - -C $baseDir $packageName | gzip -c > $packageName.tgz
rm -rf $baseDir

